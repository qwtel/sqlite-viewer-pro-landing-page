/*--------------------------------------------------------------
# Variables, functions and mixins
--------------------------------------------------------------*/
@import "abstracts/variables",
        "abstracts/functions",
        "abstracts/mixins",
        'abstracts/include-media';

/*--------------------------------------------------------------
1.0 Normalize
	* normalize.css v7.0.0 | MIT License
	* github.com/necolas/normalize.css
--------------------------------------------------------------*/
@import "normalize";

/*--------------------------------------------------------------
# Base
--------------------------------------------------------------*/
@import "base/base";

/*--------------------------------------------------------------
# Typography
--------------------------------------------------------------*/
@import "base/typography";

/*--------------------------------------------------------------
# Helpers
--------------------------------------------------------------*/
@import "base/helpers";

/*--------------------------------------------------------------
# Forms
--------------------------------------------------------------*/
@import "components/forms";

/*--------------------------------------------------------------
# Buttons
--------------------------------------------------------------*/
@import "components/buttons";

/*--------------------------------------------------------------
# Header
--------------------------------------------------------------*/
@import "layout/header";

/*--------------------------------------------------------------
# Hero
--------------------------------------------------------------*/
@import "layout/hero";

/*--------------------------------------------------------------
# Features
--------------------------------------------------------------*/
@import "layout/features";

/*--------------------------------------------------------------
# Pricing
--------------------------------------------------------------*/
@import "layout/pricing";

/*--------------------------------------------------------------
# CTA
--------------------------------------------------------------*/
@import "layout/cta";

/*--------------------------------------------------------------
# Site content
--------------------------------------------------------------*/
@import "layout/main";

/*--------------------------------------------------------------
# Footer
--------------------------------------------------------------*/
@import "layout/footer";


.vscode-only {
	display: none;
}
.vscode .vscode-only {
	display: unset;
}
.vscode .web-only {
	display: none;
}

.proof-inner {
	margin-top: 64px;
	margin-bottom: 64px;
	padding-top: 0;
	padding-bottom: 0;
}

.cards-title {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

:root {
	--card-max-height: 540px;
	--card-height: min(48vw, var(--card-max-height));
	--card-margin: min(4vw, 50px);
	--card-top-offset: 1.5em;
	--outline-width: 0px;

  @media (max-aspect-ratio: 1/1) {
    --card-height: min(48vh, var(--card-max-height));
    --card-margin: 4vh;
  }
}

#cards {
	/* Make place at bottom, as items will slide to that position*/
	padding-bottom: calc(var(--num-cards) * var(--card-top-offset));
	/* Don't include the --card-margin in padding, as that will affect the scroll-timeline*/
	margin-top: 88px;
	margin-bottom: calc(var(--card-margin) + 88px);
}

#card_1, #spy_1 {
	--index: 1;
}

#card_2, #spy_2 {
	--index: 2;
}

#card_3, #spy_3 {
	--index: 3;
}

#card_4, #spy_4 {
	--index: 4;
}

/* --- */

#cards {
	list-style: none;
	outline: calc(var(--outline-width) * 10) solid hotpink;

	display: grid;
	grid-template-columns: 1fr;
	grid-template-rows: repeat(var(--num-cards), calc(var(--card-height) + var(--card-margin)));
	gap: var(--card-margin);
}

@include media('>xxlarge') {
	:root {
		--card-max-height: 600px;
	}
	#cards {
		margin-left: -3rem;
		margin-right: -3rem;
	}
}

.card {
	outline: var(--outline-width) solid lime;
}

.card__content {
  @include shadow;
  background: color(bg, 3);
	color: color(typography, 1);
	border-radius: .5rem;
  height: var(--card-height);
	// overflow: hidden;

	display: grid;
	grid-template-areas: "text img";
	grid-template-columns: 1fr 1fr;
	grid-template-rows: auto;

	align-items: stretch;
	outline: var(--outline-width) solid blue;

  @media (max-width: 800px) {
		grid-template-columns: auto;
		grid-template-rows: 1fr 1fr;
		grid-template-areas: "img"
		                     "text";
  }
}

.card__content > div:not(.card__header) {
	grid-area: text;
	width: 80%;
	place-self: center;
	text-align: left;

	display: grid;
	gap: 1em;
	place-items: start;
}

.card__content > figure {
	grid-area: img;
	overflow: hidden;
	overflow: clip;
	border-top-right-radius: .5rem;
	border-bottom-right-radius: .5rem;
}

.card__content > figure > img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

/* --- */

.card {
	position: sticky;
	top: calc(60px + 82px);
	--card-hover-offset: 0px;
	transition: transform 0.500s;
	transform: translateY(calc(var(--index0) * var(--card-top-offset) + var(--card-hover-offset)));
}

.card, .spy {
	scroll-margin-top: calc(60px + 82px);
}

.card__content {
	transform-origin: 50% 0%;
	will-change: transform;
}

.card__header {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: calc(1.5 * var(--card-top-offset));
	cursor: pointer;
	background-color: color-mix(in srgb, color(bg, 4) 25%, transparent);
	// backdrop-filter: blur(10px);
	// --dot-color: color-mix(in oklab, var(--x-background) 75%, var(--lighten));
	// --dot-size: 1px;
	// --dot-spacing: 5px;
	// background-image: paint(dot-grid);
}

.card:has(.card__header:hover) {
	--card-hover-offset: calc(-0.125em * var(--index));
	transition: transform 0.125s;
}

.card {
	--index0: calc(var(--index) - 1); /* 0-based index */
	--reverse-index: calc(var(--num-cards) - var(--index0)); /* reverse index */
	--reverse-index0: calc(var(--reverse-index) - 1); /* 0-based reverse index */
}

#cards {
  padding: 0;
}

#cards figure {
  margin: 0;
}

@keyframes scale {
	to {
		transform: scale(calc(1.1 - calc(0.1 * var(--reverse-index))));
	}
}

@supports (view-timeline-name: --cards-element-scrolls-in-body) {
  #cards {
    --num-cards: 4;
    view-timeline-name: --cards-element-scrolls-in-body;
  }

  .card__content {
    animation: linear scale forwards;
    animation-timeline: --cards-element-scrolls-in-body;
    animation-range: exit-crossing calc(var(--index0) / var(--num-cards) * 100%) exit-crossing calc((var(--index)) / var(--num-cards) * 100%);
  }
}

div:has(> .section-title) {
	position: relative;
}
div:has(> .section-title)::after {
	content: '';
	position: absolute;
	bottom: -12px;
	left: 0;
	right: 0;
	margin: auto;
	width: 120px;
	height: 2px;
	border-radius: 1px;
	background: color(bg, 4);
}
